{"ast":null,"code":"import _objectSpread from\"C:/Users/HP-prashanth/profile-manager/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from'react';import{Typography,Button,Box,Snackbar,Alert,Paper}from'@mui/material';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProfileCard=()=>{const[profile,setProfile]=useState(null);const[snackbar,setSnackbar]=useState({open:false,message:'',severity:'success'});const navigate=useNavigate();useEffect(()=>{const localProfile=localStorage.getItem('profile');if(localProfile){setProfile(JSON.parse(localProfile));}else{axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/profile\")).then(res=>{if(Array.isArray(res.data)&&res.data.length>0){const latest=res.data[res.data.length-1];setProfile(latest);localStorage.setItem('profile',JSON.stringify(latest));}else{setProfile(null);}}).catch(()=>setProfile(null));}},[]);const handleDelete=async()=>{if(profile!==null&&profile!==void 0&&profile.id){try{await axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/profile/\").concat(profile.id));setSnackbar({open:true,message:'Profile deleted.',severity:'success'});setProfile(null);}catch(error){setSnackbar({open:true,message:'Delete failed.',severity:'error'});}}localStorage.removeItem('profile');};return/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center',bgcolor:'#f5f7fa'},children:/*#__PURE__*/_jsxs(Paper,{elevation:4,sx:{p:4,width:'100%',maxWidth:420,borderRadius:3},children:[profile?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,align:\"center\",children:\"Profile Details\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",profile.firstName,\" \",profile.lastName]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{mb:1},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",profile.email]}),profile.age!==undefined&&/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{mb:2},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Age:\"}),\" \",profile.age]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>navigate('/'),children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",onClick:handleDelete,children:\"Delete\"})]})]}):/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:\"No profile found. Please create one.\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>navigate('/'),children:\"Create Profile\"})]}),/*#__PURE__*/_jsx(Snackbar,{open:snackbar.open,autoHideDuration:3000,onClose:()=>setSnackbar(_objectSpread(_objectSpread({},snackbar),{},{open:false})),children:/*#__PURE__*/_jsx(Alert,{severity:snackbar.severity,sx:{width:'100%'},children:snackbar.message})})]})});};export default ProfileCard;","map":{"version":3,"names":["useEffect","useState","Typography","Button","Box","Snackbar","Alert","Paper","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProfileCard","profile","setProfile","snackbar","setSnackbar","open","message","severity","navigate","localProfile","localStorage","getItem","JSON","parse","get","concat","process","env","REACT_APP_API_URL","then","res","Array","isArray","data","length","latest","setItem","stringify","catch","handleDelete","id","delete","error","removeItem","sx","minHeight","display","alignItems","justifyContent","bgcolor","children","elevation","p","width","maxWidth","borderRadius","variant","gutterBottom","align","firstName","lastName","mb","email","age","undefined","onClick","color","textAlign","autoHideDuration","onClose","_objectSpread"],"sources":["C:/Users/HP-prashanth/profile-manager/src/components/ProfileCard.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { Card, CardContent, Typography, Button, Box, Snackbar, Alert, Paper } from '@mui/material';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport type ProfileType = {\r\n  id?: number;\r\n  firstName: string;\r\n  lastName: string;\r\n  email: string;\r\n  age?: number;\r\n};\r\n\r\n\r\nconst ProfileCard = () => {\r\n  const [profile, setProfile] = useState<ProfileType | null>(null);\r\n  const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'success' });\r\n  const navigate = useNavigate();\r\n\r\n useEffect(() => {\r\n  const localProfile = localStorage.getItem('profile');\r\n\r\n  if (localProfile) {\r\n    setProfile(JSON.parse(localProfile)); \r\n  } else {\r\n    axios.get(`${process.env.REACT_APP_API_URL}/profile`)\r\n      .then((res) => {\r\n        if (Array.isArray(res.data) && res.data.length > 0) {\r\n          const latest = res.data[res.data.length - 1];\r\n          setProfile(latest);\r\n          localStorage.setItem('profile', JSON.stringify(latest)); \r\n        } else {\r\n          setProfile(null);\r\n        }\r\n      })\r\n      .catch(() => setProfile(null));\r\n  }\r\n}, []);\r\n\r\n\r\n  const handleDelete = async () => {\r\n  if (profile?.id) {\r\n    try {\r\n      await axios.delete(`${process.env.REACT_APP_API_URL}/profile/${profile.id}`);\r\n      setSnackbar({ open: true, message: 'Profile deleted.', severity: 'success' });\r\n      setProfile(null);\r\n    } catch (error) {\r\n      setSnackbar({ open: true, message: 'Delete failed.', severity: 'error' });\r\n    }\r\n  }\r\n  localStorage.removeItem('profile');\r\n};\r\n\r\n return (\r\n    <Box sx={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', bgcolor: '#f5f7fa' }}>\r\n      <Paper elevation={4} sx={{ p: 4, width: '100%', maxWidth: 420, borderRadius: 3 }}>\r\n        {profile ? (\r\n  <>\r\n    <Typography variant=\"h5\" gutterBottom align=\"center\">Profile Details</Typography>\r\n    <Typography><strong>Name:</strong> {profile.firstName} {profile.lastName}</Typography>\r\n    <Typography variant=\"body1\" sx={{ mb: 1 }}><strong>Email:</strong> {profile.email}</Typography>\r\n    {profile.age !== undefined && (\r\n  <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n    <strong>Age:</strong> {profile.age}\r\n  </Typography>\r\n)}\r\n\r\n    <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\r\n      <Button variant=\"outlined\" onClick={() => navigate('/')}>Edit</Button>\r\n      <Button variant=\"contained\" color=\"error\" onClick={handleDelete}>Delete</Button>\r\n    </Box>\r\n  </>\r\n) : (\r\n  <Box sx={{ textAlign: 'center' }}>\r\n    <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n      No profile found. Please create one.\r\n    </Typography>\r\n    <Button variant=\"contained\" onClick={() => navigate('/')}>\r\n      Create Profile\r\n    </Button>\r\n  </Box>\r\n)}\r\n\r\n        <Snackbar open={snackbar.open} autoHideDuration={3000} onClose={() => setSnackbar({ ...snackbar, open: false })}>\r\n          <Alert severity={snackbar.severity as 'success' | 'error'} sx={{ width: '100%' }}>\r\n            {snackbar.message}\r\n          </Alert>\r\n        </Snackbar>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ProfileCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}